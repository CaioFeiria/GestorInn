<form
    [formGroup]="formGuests"
    (ngSubmit)="onSubmit()"
    class="max-w-md mx-auto p-6 bg-base-100 border border-gray-300 rounded-lg shadow-md"
  >
    <div class="mb-4">
      <label
        for="name"
        class="input input-bordered flex items-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 16 16"
          fill="currentColor"
          class="h-4 w-4 opacity-70"
        >
          <path
            d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM12.735 14c.618 0 1.093-.561.872-1.139a6.002 6.002 0 0 0-11.215 0c-.22.578.254 1.139.872 1.139h9.47Z"
          />
        </svg>
        <input
          type="text"
          formControlName="name"
          name="name"
          id="inpName"
          class="grow p-2 rounded"
          placeholder="Nome Completo"
          autofocus
        />
      </label>
      <p *ngIf="formGuests.get('name')?.invalid && formGuests.get('name')?.touched"
        class="text-red-600 text-xs pt-1 px-2">
          <ng-container *ngIf="formGuests.get('name')?.hasError('required')">
            Nome é obrigatório.
          </ng-container>
          <ng-container *ngIf="formGuests.get('name')?.hasError('minlength')">
            Nome deve conter no mínimo 3 caracteres!
          </ng-container>
        </p>
    </div>

    <div class="mb-4">
      <label for="email" class="input input-bordered flex items-center gap-2">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 16 16"
          fill="currentColor"
          class="h-4 w-4 opacity-70"
        >
          <path
            d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"
          />
          <path
            d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"
          />
        </svg>
        <input
          type="email"
          formControlName="email"
          name="email"
          id="inpEmail"
          class="grow p-2 rounded"
          placeholder="example@example.com"
        />
      </label>
      <p *ngIf="formGuests.get('email')?.invalid && formGuests.get('email')?.touched"
        class="text-red-600 text-xs pt-1 px-2">
          <ng-container *ngIf="formGuests.get('email')?.hasError('required')">
            Email é obrigatório.
          </ng-container>
          <ng-container *ngIf="formGuests.get('email')?.hasError('email')">
            Email inválido!
          </ng-container>
        </p>
    </div>

    <div class="mb-4">
      <label
        for="telephone"
        class="input input-bordered flex items-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="h-4 w-4 opacity-70"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"
          />
        </svg>
        <p-inputmask
          type="text"
          formControlName="phone"
          name="phone"
          id="inpPhone"
          class="grow p-2 rounded"
          mask="(99) 99999-9999"
          placeholder="Número celular"
        />
      </label>
      <p *ngIf="formGuests.get('phone')?.invalid && formGuests.get('phone')?.touched"
        class="text-red-600 text-xs pt-1 px-2">
          <ng-container *ngIf="formGuests.get('phone')?.hasError('required')">
            Celular é obrigatório.
          </ng-container>
          <ng-container *ngIf="formGuests.get('phone')?.hasError('pattern')">
            O número de celular está com o formato incorreto. Por favor, insira no formato: (XX) XXXXX-XXXX, com o DDD e os números corretamente preenchidos.
          </ng-container>
        </p>
    </div>

    <div class="mb-4">
      <label for="cpf" class="input input-bordered flex items-center gap-2">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="currentColor"
          class="h-4 w-4 opacity-70"
        >
          <path
            fill-rule="evenodd"
            d="M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z"
            clip-rule="evenodd"
          />
        </svg>
        <p-inputmask
          type="text"
          formControlName="document"
          name="document"
          id="inpDocument"
          class="grow p-2 rounded"
          mask="999.999.999-99"
          placeholder="CPF"
        />
      </label>
      <p *ngIf="formGuests.get('document')?.invalid && formGuests.get('document')?.touched"
      class="text-red-600 text-xs pt-1 px-2">
        <ng-container *ngIf="formGuests.get('document')?.hasError('required')">
          CPF é obrigatório.
        </ng-container>
        <ng-container *ngIf="formGuests.get('document')?.hasError('pattern')">
          O formato do CPF está inválido. Por favor, insira no formato correto: XXX.XXX.XXX-XX.
        </ng-container>
      </p>
    </div>

    <div class="mt-4">
      @if (add) {
        <app-commom-button 
          styleBtn="btn-accent w-full"
          label="Cadastrar"
          [isDisable]="formInvalid"
          type="submit"
        />
      } @else {
        <app-commom-button 
          styleBtn="btn-accent w-full"
          label="Atualizar"
          [isDisable]="formInvalid"
          type="submit"
        />
      }
    </div>
  </form>